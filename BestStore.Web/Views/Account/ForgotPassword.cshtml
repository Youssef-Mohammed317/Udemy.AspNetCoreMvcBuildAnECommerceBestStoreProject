@model ForgotPasswordViewModel
@inject IConfiguration Configuration
@{
	ViewData["Title"] = "Forgot Password";
}

<div class="container py-5">
	<div class="row justify-content-center">
		<div class="col-md-8 col-lg-6">
			<!-- Header -->
			<div class="text-center mb-5">
				<div class="mb-3">
					<i class="bi bi-question-circle display-1 text-primary"></i>
				</div>
				<h1 class="fw-bold text-primary">Forgot Your Password?</h1>
				<p class="text-muted">Enter your email to receive a password reset link</p>
			</div>

			<!-- Forgot Password Form -->
			<div class="card border-0 shadow-sm rounded-3">
				<div class="card-body p-4 p-md-5">
					<!-- Instructions -->
					<div class="alert alert-info rounded-2 mb-4">
						<i class="bi bi-info-circle-fill me-2"></i>
						<small>Enter the email address associated with your account and we'll send you a link to reset your password.</small>
					</div>

					<!-- Validation Summary -->
					<div asp-validation-summary="ModelOnly" class="alert alert-danger rounded-2 mb-4" role="alert"></div>

					<form asp-action="ForgotPassword" method="post" id="forgotPasswordForm">
						<!-- Email -->
						<div class="mb-4">
							<label asp-for="Email" class="form-label fw-medium">
								<i class="bi bi-envelope me-1"></i> Email Address
							</label>
							<input asp-for="Email" class="form-control form-control-lg rounded-2"
								   placeholder="Enter your email address" type="email">
							<span asp-validation-for="Email" class="text-danger small"></span>
						</div>

						<!-- Form Actions -->
						<div class="d-flex flex-column flex-md-row justify-content-between align-items-center mt-5 pt-3 border-top">
							<a asp-controller="Account" asp-action="Login"
							   class="btn btn-outline-secondary px-4 py-2 rounded-2 fw-medium">
								<i class="bi bi-arrow-left me-2"></i> Back to Login
							</a>
							<a asp-controller="Account" asp-action="ForgotPassword" type="reset" class="btn btn-outline-warning px-4 py-2 rounded-2 fw-medium">
								<i class="bi bi-x-circle me-2"></i> Clear
							</a>
							<button type="submit" class="btn btn-primary px-4 py-2 rounded-2 fw-medium">
								<i class="bi bi-send me-2"></i> Send Reset Link
							</button>
						</div>
					</form>
				</div>
			</div>

			<!-- Help Information -->
			<div class="row mt-4">
				<!-- Did You Know? -->
				<div class="col-md-6 mb-3">
					<div class="card border-0 shadow-sm rounded-3 h-100">
						<div class="card-body p-4">
							<div class="d-flex align-items-center mb-3">
								<div class="bg-info bg-opacity-10 p-3 rounded-2 me-3">
									<i class="bi bi-lightbulb fs-4 text-info"></i>
								</div>
								<div>
									<h5 class="card-title fw-bold mb-0">Did You Know?</h5>
								</div>
							</div>
							<p class="card-text text-muted mb-0 small">
								Check your spam or junk folder if you don't see the password reset email in your inbox.
							</p>
						</div>
					</div>
				</div>

				<!-- Need Help? -->
				<div class="col-md-6 mb-3">
					<div class="card border-0 shadow-sm rounded-3 h-100">
						<div class="card-body p-4">
							<div class="d-flex align-items-center mb-3">
								<div class="bg-primary bg-opacity-10 p-3 rounded-2 me-3">
									<i class="bi bi-headset fs-4 text-primary"></i>
								</div>
								<div>
									<h5 class="card-title fw-bold mb-0">Need Help?</h5>
								</div>
							</div>
							<p class="card-text text-muted mb-3 small">
								If you're still having trouble, please contact our support team.
							</p>
							<a href='mailto:@Configuration["BrevoSettings:SenderEmail"]' class="btn btn-outline-primary btn-sm w-100 rounded-2">
								<i class="bi bi-envelope me-2"></i> Contact Support
							</a>
						</div>
					</div>
				</div>
			</div>

		
		</div>
	</div>
</div>

<style>
	/* Custom styling */
	.card {
		transition: transform 0.2s ease, box-shadow 0.2s ease;
	}

		.card:hover {
			transform: translateY(-3px);
			box-shadow: 0 8px 25px rgba(0,0,0,0.1) !important;
		}

	.form-control {
		border: 1px solid #dee2e6;
		padding: 0.75rem 1rem;
		transition: all 0.2s ease;
	}

		.form-control:focus {
			border-color: #0d6efd;
			box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
		}

	.form-label {
		font-size: 0.9rem;
		color: #495057;
		margin-bottom: 0.5rem;
	}

	.btn-primary {
		background-color: #0d6efd;
		border-color: #0d6efd;
		transition: all 0.2s ease;
	}

		.btn-primary:hover {
			background-color: #0b5ed7;
			border-color: #0a58ca;
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(13, 110, 253, 0.25);
		}

	.btn-outline-warning:hover {
		background-color: #ffc107;
		color: #000;
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(255, 193, 7, 0.25);
	}

	.btn-outline-secondary:hover {
		background-color: #6c757d;
		color: white;
		transform: translateY(-2px);
	}

	/* Responsive adjustments */
	@@media (max-width: 768px) {
		.card-body {
			padding: 1.5rem !important;
		}

		.display-1 {
			font-size: 3.5rem;
		}
	}
</style>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />

	<script>
		document.addEventListener('DOMContentLoaded', function() {
			// Enhanced reset button functionality
			const resetBtn = document.querySelector('button[type="reset"]');
			const form = document.getElementById('forgotPasswordForm');

			if (resetBtn && form) {
				resetBtn.addEventListener('click', function() {
					// Clear the form
					form.reset();

					// Clear validation styling
					document.querySelectorAll('.form-control').forEach(input => {
						input.classList.remove('is-invalid', 'is-valid');
					});

					// Clear validation messages
					document.querySelectorAll('.field-validation-error').forEach(span => {
						span.textContent = '';
					});

					// Clear validation summary
					const validationSummary = document.querySelector('[asp-validation-summary]');
					if (validationSummary) {
						validationSummary.style.display = 'none';
					}

					// Give visual feedback
					const originalText = this.innerHTML;
					this.innerHTML = '<i class="bi bi-check me-2"></i> Cleared';
					this.classList.remove('btn-outline-warning');
					this.classList.add('btn-success');

					setTimeout(() => {
						this.innerHTML = originalText;
						this.classList.remove('btn-success');
						this.classList.add('btn-outline-warning');
					}, 1500);
				});
			}

			// Auto-focus email field
			const emailInput = document.querySelector('input[type="email"]');
			if (emailInput) {
				setTimeout(() => {
					emailInput.focus();
				}, 100);
			}
		});
	</script>
}